(this.webpackJsonpmup=this.webpackJsonpmup||[]).push([[0],{13:function(t,e,i){},14:function(t,e,i){},15:function(t,e,i){},17:function(t,e,i){"use strict";i.r(e);var a=i(1),n=i.n(a),s=i(8),r=i.n(s),c=(i(13),i(2)),h=i(3),o=i(6),u=i(5),l=i(4),d=(i(14),i(15),i(0)),v=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var n;return Object(c.a)(this,i),(n=e.call(this,t)).putPixel=function(t,e,i){var a=255*i,s="rgb("+a+","+a+","+a+")";n.ctx.fillStyle=s,n.ctx.fillRect(t,e,1,1)},n.canvas=null,n.ctx=null,n.canvasRef=a.createRef(),n.h=0,n.w=0,n.stars=null,n.prevTime=null,n}return Object(h.a)(i,[{key:"drawImage",value:function(){var t=this;window.onresize=function(){t.setCanvasExtents()},this.canvas=this.canvasRef.current,this.ctx=this.canvas.getContext("2d"),this.setCanvasExtents(),this.stars=this.makeStars(2e3),this.init=this.init.bind(this),this.tick=this.tick.bind(this),requestAnimationFrame(this.init)}},{key:"setCanvasExtents",value:function(){this.w=document.body.clientWidth,this.h=document.body.clientHeight,this.canvas.width=this.w,this.canvas.height=this.h}},{key:"makeStars",value:function(t){for(var e=[],i=0;i<t;i++){var a={x:1600*Math.random()-800,y:900*Math.random()-450,z:1e3*Math.random()};e.push(a)}return e}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"moveStars",value:function(t){for(var e=this.stars.length,i=0;i<e;i++){var a=this.stars[i];for(a.z-=t;a.z<=1;)a.z+=1e3}}},{key:"init",value:function(t){this.prevTime=t,requestAnimationFrame(this.tick)}},{key:"tick",value:function(t){var e=t-this.prevTime;this.prevTime=t,this.moveStars(.1*e),this.clear();for(var i=this.w/2,a=this.h/2,n=this.stars.length,s=0;s<n;s++){var r=this.stars[s],c=i+r.x/(.001*r.z),h=a+r.y/(.001*r.z);if(!(c<0||c>=this.w||h<0||h>=this.h)){var o=r.z/1e3,u=1-o*o;this.putPixel(c,h,u)}}requestAnimationFrame(this.tick)}},{key:"render",value:function(){return Object(d.jsx)("canvas",{ref:this.canvasRef,className:"space-element",style:{background:"transparent"},width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(t){console.log("draw"),this.drawImage()}}]),i}(a.Component),f=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var a;return Object(c.a)(this,i),(a=e.call(this,t)).canvas=null,a.ctx=null,a.canvasRef=n.a.createRef(),a.requestRef=n.a.createRef(),a.isPlaying=!1,a.timeout=null,a.analyser=null,a.frequencyArray=[],a.updateVisualization=a.updateVisualization.bind(Object(o.a)(a)),a}return Object(h.a)(i,[{key:"initCanvas",value:function(){this.canvas=this.canvasRef.current,this.ctx=this.canvas.getContext("2d"),this.updateVisualization()}},{key:"initAudio",value:function(){var t=new(window.AudioContext||window.webkitAudioContext);this.analyser=t.createAnalyser(),this.analyser.fftSize=512,t.createMediaElementSource(this.props.audio).connect(this.analyser),this.analyser.connect(t.destination),this.frequencyArray=new Uint8Array(this.analyser.frequencyBinCount)}},{key:"pausePauseEvent",value:function(){var t=this;this.props.startAnimation?(clearTimeout(this.timeout),this.isPlaying=!0,this.initCanvas()):this.timeout=setTimeout((function(){t.isPlaying=!1}),2e3)}},{key:"drawCanvas",value:function(){if(this.canvasRef.current){this.analyser.getByteFrequencyData(this.frequencyArray);for(var t=Math.floor(this.frequencyArray[1]),e=.45*this.canvas.width<=450?-(.25*t+.45*this.canvas.width):-(.25*t+100),i=0;i<this.frequencyArray.length;i++){var a=this.frequencyArray[i];i>0&&(this.ctx.fillStyle="#86c06c",this.ctx.fillRect(0,e,2,-a/2),this.ctx.rotate(180/256*Math.PI/180))}for(var n=0;n<this.frequencyArray.length;n++){var s=this.frequencyArray[n];n>0&&(this.ctx.fillStyle="#316851",this.ctx.fillRect(0,e,2,-s/2),this.ctx.rotate(180/256*Math.PI/180))}this.ctx.restore()}}},{key:"updateVisualization",value:function(){this.isPlaying&&this.canvasRef.current&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.translate(window.innerWidth/2,window.innerHeight/2),this.drawCanvas(),this.requestRef.current=requestAnimationFrame(this.updateVisualization))}},{key:"render",value:function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("canvas",{ref:this.canvasRef,className:"visualiser-element",style:{background:"transparent"},width:window.innerWidth,height:window.innerHeight})})}},{key:"componentDidMount",value:function(t){(!t||t&&t.audio!==this.props.audio)&&(this.initAudio(),this.pausePauseEvent()),(!t||t&&t.startAnimation!==this.props.startAnimation)&&this.pausePauseEvent()}}]),i}(n.a.Component),y=i.p+"static/media/boy.09e91660.svg",m=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var n;return Object(c.a)(this,i),(n=e.call(this,t)).state={counter:0},n.canvas=null,n.ctx=null,n.canvasRef=a.createRef(),n}return Object(h.a)(i,[{key:"drawImage",value:function(){var t=this;this.canvas=this.canvasRef.current,this.ctx=this.canvas.getContext("2d"),"boy"===this.props.imageType&&(this.image=new Image,this.image.src=y,this.image.onload=function(){t.ctx.drawImage(t.image,t.canvas.width/2-104,t.canvas.height/2-120,220,220),t.ctx.save()})}},{key:"render",value:function(){return Object(d.jsx)("canvas",{ref:this.canvasRef,className:"boy-element",style:{background:"transparent"},width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(t){(!t||t&&t.startAnimation!==this.props.startAnimation)&&this.drawImage()}}]),i}(a.Component),p=i.p+"static/media/promise.06f37e67.mp3",b=function(t){Object(u.a)(i,t);var e=Object(l.a)(i);function i(t){var a;return Object(c.a)(this,i),(a=e.call(this,t)).state={play:!1,audioObject:null},a.audio=new Audio,a.handleButtonClick=a.handleButtonClick.bind(Object(o.a)(a)),a}return Object(h.a)(i,[{key:"handleButtonClick",value:function(){this.audio.paused?this.audio.src&&this.audio.src.length?this.audio.play():this.initAudio():this.audio.pause(),this.setState({play:!0})}},{key:"initAudio",value:function(){console.log("start"),this.audio.src=p,this.audio.crossOrigin="anonymous",this.audio.load(),this.setState({audioObject:this.audio}),this.audio.play()}},{key:"render",value:function(){var t=this,e=function(){return t.audio&&!t.audio.paused?Object(d.jsx)("p",{className:"startButton",onClick:t.handleButtonClick,children:"PAUSE"}):Object(d.jsx)("p",{className:"startButton",onClick:t.handleButtonClick,children:"PLAY"})};return this.state.play?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(v,{}),Object(d.jsx)(f,{startAnimation:this.state.play,audio:this.state.audioObject}),Object(d.jsx)(m,{imageType:"boy",startAnimation:this.state.play}),e()]}):Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(v,{}),e()]})}}]),i}(a.Component);r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.f52360d8.chunk.js.map